<!--
SPDX-FileCopyrightText: 2025 Kerrick Long <me@kerricklong.com>
SPDX-License-Identifier: CC-BY-SA-4.0
-->

# Prompt for Developer Agent: Phase 4, Step 4.1

You are a Senior Ruby Developer. Your task is to create a new demo application that showcases the Frame-based API. This implements **Phase 4, Step 4.1** of the [Frame Migration Plan](../../../doc/contributors/frame_migration.md).

## Context

Previous agents have completed:
- **Phase 1**: Rust backend for `RubyFrame` with `area()` and `render_widget()`.
- **Phase 2**: Ruby `Frame` class, updated `RatatuiRuby.draw` signature.
- **Phase 3**: Verified `Layout.split` returns `Array<Rect>`.

The Frame-based API is now functional. Your job is to create a **demonstration example** that proves the new API works and showcases its benefits, particularly for hit-testing.

## Task Specs

### 1. Create `examples/frame_demo/app.rb`

**Structure**: Follow the existing example app pattern (see `examples/analytics/app.rb` or similar).

**Requirements**:
- Use `RatatuiRuby.run do ... end` for the main loop.
- Use `RatatuiRuby.draw do |frame| ... end` (the new block syntax).
- Use `Layout.split(frame.area, ...)` to divide the terminal into regions.
- Render at least two widgets using `frame.render_widget(widget, rect)`.
- **Hit-Testing Demonstration**:
    - Store a `Rect` in an instance variable (e.g., `@sidebar_rect`).
    - In `handle_input`, check if a mouse click is within `@sidebar_rect.contains?(x, y)`.
    - Respond to the click in some visible way (e.g., change content, log a message).

### 2. Create `examples/frame_demo/test_app.rb`

**Structure**: Follow the existing test pattern (see `examples/analytics/test_app.rb`).

- Use the test backend (`RatatuiRuby.init_test_terminal`).
- Verify that `RatatuiRuby.draw { |frame| ... }` renders content to the buffer.
- Verify that `frame.area` returns a `Rect` with expected dimensions.
- Optionally test hit-testing logic by injecting mouse events.

### 3. App Behavior

**Suggested Layout**:
- Sidebar (left, fixed width) with a list or navigation.
- Main area (right, fill) with content.
- When the sidebar is clicked, update the main area to show which item was clicked.

**Key Demonstration Points**:
- Show that `frame.area` provides terminal dimensions.
- Show that `Layout.split` returns rects that are immediately usable for both rendering AND hit-testing.
- Show the elimination of duplicated layout logic (no separate `calculate_layout` method).

## References
- `examples/analytics/app.rb`: Example app structure.
- `examples/hit_test/app.rb`: Existing hit-test example (to be refactored in Step 4.2, but useful for context).
- `doc/contributors/frame_proposal.md`: See "Example: Complete App" section for API usage patterns.
- `AGENTS.md`: Coding standards and conventions.

## Definition of Done
- `examples/frame_demo/app.rb` exists and runs successfully with `ruby examples/frame_demo/app.rb`.
- `examples/frame_demo/test_app.rb` exists and passes when run with `bundle exec ruby examples/frame_demo/test_app.rb`.
- The demo uses the new Frame-based API exclusively (no legacy `draw(tree)` calls).
- Hit-testing is demonstrated using stored rects from the draw block.
