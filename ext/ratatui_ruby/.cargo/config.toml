# SPDX-FileCopyrightText: 2025 Kerrick Long <me@kerricklong.com>
# SPDX-License-Identifier: AGPL-3.0-or-later

[target.aarch64-apple-darwin]
rustflags = ["-C", "link-arg=-undefined", "-C", "link-arg=dynamic_lookup"]

[target.x86_64-apple-darwin]
rustflags = ["-C", "link-arg=-undefined", "-C", "link-arg=dynamic_lookup"]

# Force dynamic linking on Alpine (musl) to fix "Dynamic loading not supported"
# errors when bindgen tries to load libclang.
[target.'cfg(target_env = "musl")']
rustflags = ["-C", "target-feature=-crt-static"]